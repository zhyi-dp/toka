import core/io::printf
import core/memory

struct Point {
    x: i32,
    y: i32,
}

fn main() -> i32 {
    auto *ptr# = new Point { x = 10, y = 20 }
    
    // 1. Point-Value Duality: ptr is the object
    printf("ptr.x = %d (expected 10)\n", ptr.x)
    ptr#.x = 100
    printf("After ptr#.x = 100, ptr.x = %d (expected 100)\n", ptr.x)
    
    // 2. Identity access: *ptr is the pointer
    printf("Address (*ptr) = %p\n", *ptr)
    
    // 3. Explicit pointer access: (*ptr)->y
    printf("(*ptr)->y = %d (expected 20)\n", (*ptr)->y)
    
    del *ptr
    
    printf("Morphology test done\n")
    return 0
}

import std/memory::assert

fn main() -> i32 {
    auto a = 12
    auto b = 10
    
    // Test band: 1100 & 1010 = 1000 (8)
    auto c = a band b
    assert(c == 8, "band check failed")

    // Test bor: 1100 | 1010 = 1110 (14)
    auto d = a bor b
    assert(d == 14, "bor check failed")

    // Test bxor: 1100 ^ 1010 = 0110 (6)
    auto e = a bxor b
    assert(e == 6, "bxor check failed")

    // Test bnot: ~12 = -13 (in 2s complement)
    auto f = bnot a
    assert(f == -13, "bnot check failed")

    // Test simple precedence with parens (User style)
    // (1 bor 2) band 4 = 3 band 4 = 0
    auto g = (1 bor 2) band 4
    assert(g == 0, "Parens precedence check failed")

    // Test without parens? 
    // Precedence: band (10) > bor (5)
    // 1 bor 2 band 4 = 1 bor (2 band 4) = 1 bor 0 = 1
    auto h = 1 bor 2 band 4
    assert(h == 1, "Precedence check (band > bor) failed")

    // Test bshl: 1 << 2 = 4 (High precedence)
    auto i = 1 bshl 2
    assert(i == 4, "bshl check failed")

    // Test bshr: 4 >> 1 = 2 (High precedence)
    auto j = 4 bshr 1
    assert(j == 2, "bshr check failed")

    // Test precedence: 1 bshl 2 bor 1
    // (1 << 2) | 1 = 4 | 1 = 5.
    // 1 << (2 | 1) = 1 << 3 = 8.
    auto k = 1 bshl 2 bor 1
    assert(k == 5, "Precedence check (bshl > bor) failed")

    return 0
}

// tests/pass/test_string_v13.tk
import std/io::println
import std/string::String

fn main() -> i32 {
    println("Testing String v1.3...")

    // 1. Basic Construction
    auto s = String::from("Hello")
    println("Initial string: {}", s.as_ptr())
    println("Length: {} (expected 5)", s.len())
    println("Capacity: {} (expected 6)", s.capacity())

    if s.len() != 5 { return 1 }

    // 2. Growth via push_str
    s.push_str(" Toka")
    println("Modified string: {}", s.as_ptr())
    println("New Length: {} (expected 10)", s.len())
    
    if s.len() != 10 { return 2 }

    // 3. Repeated growth to trigger realloc
    s.push_str("! This is a long string to trigger realloc.")
    println("Final string: {}", s.as_ptr())
    println("Final Length: {}", s.len())
    println("Final Capacity: {}", s.capacity())

    if s.len() <= 10 { return 3 }

    // 4. Memory Cleanup
    s.drop()
    println("String dropped successfully.")

    return 0
}

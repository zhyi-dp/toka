import std/io::println

shape Data (
    v: i32
)

fn main() -> i32 {
    auto ^?p = new Data(v = 42)
    
    // Narrowing: ^?p is ^p
    if ^?p is ^p {
        println("Success: p.v = {}", p.v)
    } else {
        println("Failure: p is nullptr\n")
    }

    auto ^?q# = nullptr
    if ^?q is nullptr {
        println("Success: q confirmed nullptr\n")
    } else {
        println("Error: q should be nullptr\n")
    }

    return 0
}
